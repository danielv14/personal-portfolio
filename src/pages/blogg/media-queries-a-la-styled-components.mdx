---
title: Media Queries √° la styled-components
summary: Tre olika, men ocks√• snarlika, exempel p√• hur man kan jobba med CSS Media Queries i styled-components.
layout: blogPost
date: 2020-11-01
---

H√§romdagen experimenterade jag lite med styled-components, som √§r den CSS-in-JS l√∂sning f√∂r styling p√• den h√§r sajten.

Jag testade lite olika s√§tt hur man kan hantera media queries p√• ett s√•nt ‚Äùstyled-components-igt‚Äù s√§tt som m√∂jligt. Tillslut landade jag i en l√∂sning som k√§ndes r√§tt schysst.

Med det sagt s√• t√§nkte jag g√• igenom lite olika s√§tt man kan implementera media queries med styled-components p√•.

> Alla exempel p√• media queries kommer utg√• fr√•n en mobile-first approach och anv√§nda **@media (min-width: pixelbredd) {}** som exempel.

## Den allra enklaste l√∂sningen üë∂üèº

L√•t s√§ga att man har en `<Paragraph />` styled-component som ser ut ungef√§r s√• h√§r:

```js:Paragraph.js
const Paragraph = styled.p`
  color: pink;
`;
```

Vill man d√• g√∂ra den h√§r komponenten responsiv och exempelvis f√• en annan f√§rg p√• st√∂rre sk√§rmar skulle den kunna se ut s√• h√§r ist√§llet:

```js:Paragraph.js
const Paragraph = styled.p`
  color: pink;
  @media (min-width: 700px) {
    color: blue;
  }
`;
```

Komponenten skulle nu allts√• resultera i en rosa paragraf p√• alla sk√§rmstorlekar upp till 700px breda. D√§refter skulle paragrafen vara bl√•. Perfekt.

### Vad kan man d√• s√§ga om den h√§r l√∂sningen?

Jo... den √§r v√§ldigt enkel och straight-forward.

Nackdelen blir dock att den h√§r komponenten sj√§lv m√•ste h√•lla reda p√• vilken bredd som g√§ller f√∂r att applicera responsiva √§ndringar.

Den h√§r l√∂sningen inneb√§r att varje komponent m√•ste h√•lla reda p√• att det √§r en mobile-first approach som anv√§nds i och med `min-width`.

Har man flera komponenter med likande media queries med just `min-width: 700px` h√•rdkodade i varje komponent m√•ste varje komponent h√•llas i synk om man √§ndrar sin breakpoint-skala. Om man vill √§ndra 700px till 675px exempelvis.

Dessutom s√§ger inte 700px _ingenting_ egentligen. Det beskriver inte vad 700px faktiskt _representerar_ - vilket kanske skulle kunna vara ‚ÄùAlla medium-sk√§rmar s√•som tablets och upp√•t‚Äù.

## Den lite mer dynamiska och beskrivande l√∂sningen üßíüèº

Hur g√∂r man f√∂reg√•ende l√∂sning lite mer dynamisk p√• s√• s√§tt att varje komponent inte sj√§lva beh√∂ver h√•lla reda p√• de faktiska sk√§rmbredderna? Samtidigt som man f√•r en media query som √§r lite mer beskrivande?

Jo man skulle kunna g√∂ra n√•gonting ungef√§r s√• h√§r:

```js:Paragraph.js
// L√•tsas att det h√§r breakpoints objektet √§r en annan fil
export const breakpoints = {
  small: '550px',
  medium: '700px',
  large: '1024px',
};

// Importera breakpoints-objektet i Paragraph-komponenten
import { breakpoints } from 'somewhere/you/store/breakpoints';

const Paragraph = styled.p'
  color: pink;
  @media (min-width: ${breakpoints.medium}) {
    color: blue;
  }
';
```

### Vad √§r det som √§r b√§ttre med den h√§r l√∂sningen d√•?

Ovanst√•ende exempel inneb√§r att komponenterna inte m√•ste h√•lla reda p√• vad breakpoint-skalan inneh√•ller f√∂r faktiska v√§rden.

Beh√∂ver man justera sin breakpoint-skala beh√∂ver man bara g√∂ra det p√• ett st√§lle - i breakpoints-objektet. Alla ens responsiva komponenter f√•r d√• det nya pixelv√§rdena automatisk.

Men det kanske mest intressant med det h√§r exemplet √§r hur den h√§r l√∂sningen b√§ttre _beskriver_ vad varje breakpoint faktiskt inneb√§r. Detta f√∂r att man har grupperat breakpoint-skalan i ett objekt (eller en array f√∂r den delen) och kan namnge vad man anser att pixelv√§rdena inneb√§r.

I just det h√§r exemplet visade det sig dessutom att 700px ligger i mitten p√• breakpoint-skalan av **small**, **medium** och **large**.

### N√•gra nackdelar?

Sj√§lvklart finns det n√•gra nackdelar med den h√§r l√∂sningen.

Varje komponent som ska vara responsiv m√•ste importera breakpoint-skalan som man med f√∂rdel har skapat upp i ett slags theme-objekt.

Dessutom m√•ste varje komponent fortfarande h√•lla koll p√• att det √§r `min-width` som g√§ller och inte `max-width` exempelvis.

Komponenterna m√•ste allts√• fortfarande veta vissa implementationsdetaljer kring hur media queries ska anv√§ndas.

## L√∂sningen √° la styled-components üë®üèª‚Äçüéì

Hur bygger man d√• egentligen vidare p√• f√∂reg√•ende exempel? Hur f√•r man en media-query-l√∂sning som √§r mer i linje med hur styled-components fungerar?

Jo... egentligen skulle man kunna bryta ned det i lite olika steg:

1. **Tema i kontext:** Se till att breakpoints definieras utanf√∂r ens styled-components men blir tillg√§ngliga i komponenterna via Context - ist√§llet f√∂r att komponenterna m√•ste importera skalan hela tiden.
2. **Media query hj√§lpmedel:** Skapa beskrivande och √•teranv√§ndbara hj√§lpmedel som l√§ser av breakpoints fr√•n Context och spottar ut f√§rdiga media queries. Anv√§nd detta hj√§lpmedel i komponenterna.

En stor f√∂rdel med styled-components och m√•nga andra CSS-in-JS l√∂sningar f√∂r React √§r att man i sina komponenter kan l√§sa av ett tema fr√•n Context p√• v√§ldigt smidiga s√§tt - som √§r inbyggt i styled-components.

### L√§gg breakpoint i React Context

Styled-components kommer med en f√§rdig l√∂sning f√∂r hur man hanterar temning via Context och tillhandah√•ller √§ven f√§rdiga hooks f√∂r att f√• tag i ThemeContext.

> Vill man l√§sa mer om temning, Context och styled-components s√• g√•r det att g√∂ra [h√§r](https://styled-components.com/docs/advanced#theming).

Det handlar allts√• om att man tar sitt f√§rdiga tema-objekt, som inneh√•ller det breakpoints-objekt med **small**, **medium** och **large** och ser till att det temat tillg√§ngligg√∂rs via en `<ThemeProvider>` komponent - h√∂gt upp i ens React-tr√§d av komponenter.

Detta g√∂r d√• allts√• att _alla_ styled-components _automatiskt_ f√•r tillg√•ng till temat.

### Hj√§lpmedel f√∂r tema-medveten media query

Vad menar jag d√• egentligen med ett tema-medvetet hj√§lpmedel f√∂r media queries?

Det √§r nog kanske enklast att f√∂rst kika p√• ett kodexempel av det och sen igenom exemplet √∂vergripande:

```js:Media.js
const getBreakpointScaleFromTheme = (breakpoint) =>
  css(({ theme }) => theme.breakpoints[breakpoint])

const breakpointToMediaQuery = (breakpoint) => (templateStrings) => css'
	@media (min-width: ${getBreakpointScaleFromTheme(breakpoint)} {
	  css(templateStrings)
  }
'
export const media = {
	small: breakpointToMediaQuery(‚Äôsmall‚Äô),
	medium: breakpointToMediaQuery(‚Äômedium‚Äô),
	large: breakpointToMediaQuery(‚Äôlarge‚Äô)
}
```

Oj...Nu vart det kanske lite mycket p√• en g√•ng üßê

Den minsta funktionen `getBreakpointScaleFromTheme` tar som parameter en breakpoint, som i det h√§r fallet √§r **small**, **medium**, eller **large**.

Den funktionen anv√§nder i sina tur `css()`. Vad √§r d√• det f√∂r n√•got? Det √§r en hj√§lpfunktion som exponerar hela ThemeContext, men √§ven eventuella props p√• en styled component.

`getBreakpointScaleFromTheme` ser allts√• till att l√§sa av ThemeContext och h√§mta ut efterfr√•gad breakpoint-v√§rde.

`breakpointToMediaQuery` √§r den funktion som bygger upp sj√§lva media queryn. √Ñven denna funktion tar en breakpoint som parameter.
Den h√§r funktionen returnerar i sin tur _en funktion_ som tar in templateStrings som parameter och skickar den parametern till ett `css(templateStrings)` funktionsanrop - inuti sj√§lva media queryn.

Slutligen s√• exporteras ett objekt som inneh√•ller olika variationer av den templateStrings-funktion som `breakpointToMediaQuery` returnerar.

> Vill man l√§sa mer om temlate strings (eller template literals) s√• har Wes Bos [skrivit](https://wesbos.com/tagged-template-literals) en bra genomg√•ng av hur det hela funkar.

I det h√§r l√§get kan det vara sv√•rt att f√∂rest√§lla sig hur det h√§r media-objektet egentligen ska kunna anv√§ndas i Paragraf-komponenten om man inte √§r speciellt van med styled-components.

### Hur anv√§nder man d√• egentligen det h√§r media-objektet?

Vi √•terbes√∂ker Paragraf-komponenten en sista g√•ng och nu kan den ist√§llet se ut s√• h√§r:

```js:Paragraph.js
import { media } from 'where/you/put/media/helper';

const Paragraph = styled.p'
	color: pink;
	${media.medium'
		color: blue;
	'}
'
```

**Vad h√§nde egentligen d√§r?**

Jo... media √§r som bekant ett objekt med nycklar **small**, **medium** och **large**.

Varje nyckel representerar en funktion som tar en template string som parameter.

I bakgrunden g√∂r funktionerna p√• objektet det som beh√∂vs f√∂r att l√§sa ut breakpoints fr√•n Context och tar hand om implementationsdetaljerna, utan att s√•dant l√§cker ut i komponenterna.

- **media.small** mappas mot det pixelv√§rde man har specificerat i Context p√• theme.breakpoints.small
- **media.medium** mappas mot det pixelv√§rde man har specificerat i Context p√• theme.breakpoints.medium
- **media.large** mappas mot det pixelv√§rde man har specificerat i Context p√• theme.breakpoints.large

### Varf√∂r anv√§nda ett s√•nt h√§r tillv√§gag√•ngss√§tt?

K√§nns det spontant som ett komplicerat s√§tt att hantera media queries p√•? Kanske det. _Men..._

Tidigare har vi sett exempel p√• media queries i styled-components som √§r helt h√•rdkodade.

Vi har ocks√• kikat p√• media queries som l√§ser av en breakpoint-skala fr√•n ett importerat objekt som √§r t√§nkt att representera ett tema.

Det h√§r tredje exemplet m√• vara lite mer komplicerat men kommer, enligt mig, med en rad f√∂rdelar:

- Komponenter beh√∂ver **inte k√§nna till implementationsdetaljer** kring media queries s√•som max-width eller min-width utan komponenter kan fokusera helt p√• _vad_ som ska h√§nda vid en viss breakpoint ist√§llet.
- Komponenter √§r **inte h√•rt kopplade till den konfiguration** som s√§ger vilka exakta sk√§rmbredder som utg√∂r en viss breakpoint. Den konfigurationen √§r inte intressant f√∂r komponenterna egentligen.
- Breakpoint-skalan har till **stor del abstraherats bort fr√•n komponenterna** i och med att avl√§sning av Context sker i hj√§lpfunktionerna.

üôãüèº‚Äç‚ôÇÔ∏è Personligen gillar jag det h√§r sista s√§ttet att jobba med media queries. F√∂r denna sajt s√• landade jag i en l√∂sning v√§ldigt lik det tredje exemplet, i alla fall i skrivande stund. Detta f√∂r att jag redan nyttjar ett tema-objekt som l√§ses in i Context och tillg√§ngligg√∂rs i mina styled-components.

N√§r jag d√• skriver mina komponenter beh√∂ver jag inte bry mig om implementationsdetaljer kring hur media queries struktureras i det specifika projektet.

Jag importerar bara media-objektet och slipper fokusera p√• _hur_ jag ska skriva mina media queries varje g√•ng en komponent ska ha responsivitet. Ist√§llet fokuserar jag helt p√• _vad_ som ska h√§nda vid varje breakpoint ist√§llet.

Ganska smidigt √§nd√•!
